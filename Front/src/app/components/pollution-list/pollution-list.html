<div class="list-container">
  <div class="page-header">
    <h2>Liste des Pollutions</h2>
    <button class="btn-create" (click)="onCreateNew()">
      ‚ûï Signaler une pollution
    </button>
  </div>

  <div class="filters">
    <div class="filter-group">
      <label>Titre :</label>
      <input
        type="text"
        [ngModel]="filterTitle()"
        (ngModelChange)="filterTitle.set($event); applyFilters()"
        placeholder="Rechercher par titre..."
      >
    </div>

    <div class="filter-group">
      <label>Type :</label>
      <select [ngModel]="filterType()" (ngModelChange)="filterType.set($event); applyFilters()">
        <option value="">Tous</option>
        @for (type of pollutionTypes; track type) {
          <option [value]="type">{{ type }}</option>
        }
      </select>
    </div>
  </div>

  @if (loading()) {
    <div class="loading">Chargement en cours...</div>
  }

  @if (error()) {
    <div class="error">{{ error() }}</div>
  }

  @if (!loading() && !error()) {
    <div class="pollution-grid">
      @for (pollution of pollutions(); track pollution.id) {
        <div class="pollution-card" (click)="onViewDetail(pollution)">
          <div class="card-header">
            <span class="type-icon">{{ getTypeIcon(pollution.type) }}</span>
          </div>

          <h3>{{ pollution.title }}</h3>
          <p class="location">üìç {{ pollution.location }}</p>
          <p class="description">{{ pollution.description }}</p>

          <div class="card-actions">
            <button
              class="btn-edit"
              (click)="onEdit(pollution, $event)"
              title="Modifier">
              ‚úèÔ∏è
            </button>
            <button
              class="btn-delete"
              (click)="onDelete(pollution.id, $event)"
              title="Supprimer">
              üóëÔ∏è
            </button>
          </div>
        </div>
      } @empty {
        <div class="no-data">Aucune pollution trouv√©e</div>
      }
    </div>
  }
</div>
